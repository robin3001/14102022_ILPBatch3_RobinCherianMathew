package com.experion.service;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;
import java.util.Scanner;

import com.experion.entity.Product;

public class Service {
		
	public static Product createProduct() throws ParseException  {
		
		Scanner scanner = new Scanner(System.in);

		System.out.println("Enter Product Code: ");
		String productCode = scanner.nextLine();
		System.out.println("Enter Product Name: ");
		String productName = scanner.nextLine();
		System.out.println("Enter Product Description: ");
		String productDescription = scanner.nextLine();
		System.out.println("Enter Product Price: ");
		double productPrice = scanner.nextDouble();
		scanner.nextLine(); //Clear the buffer
		
		System.out.println("Enter Product Open Date (dd-MM-yyyy) : ");
		
		String openStringDate = scanner.nextLine();
		
		Date openDate = new SimpleDateFormat("dd-MM-yyyy").parse(openStringDate);
		
		
		System.out.println("Enter Product Validity: (dd-MM-yyyy) ");
		String validityStringDate = scanner.nextLine();
		Date validityDate = new SimpleDateFormat("dd-MM-yyyy").parse(validityStringDate);
		
		System.out.println("Enter Product expiry Date:(dd-MM-yyyy) ");
		String expiryStringDate = scanner.nextLine();
		
		Date expiryDate = new SimpleDateFormat("dd-MM-yyyy").parse(expiryStringDate);
		
		
//		System.out.println("Enter Product Active or not: ");
//		boolean active = scanner.nextBoolean();

		Product product = new Product(productCode,productName,productDescription,productPrice,openDate,validityDate,expiryDate);
		
		product.setSerialNo(product.getSerialNo() + 1);
		product.setSerialNoOriginal(product.getSerialNo());

		return product;
		
//		product.setProductCode(productCode);
		
//		product.setProductName(productName);
//	
//		
//		product.setProductDescription(productDescription);
//	
//		
//		product.setProductPrice(productPrice);
//
//		product.setOpenDate(openDate);
//		
//		product.setValidityDate(validityDate);
//	
//		
//		product.setExpiryDate(expiryDate);
//
//		
//		product.setActive(active);


	}
	
	
	
	public static void displayProductDetails(ArrayList<Product> productList) {
		
			
		System.out.println("SL NO" + "    " +
				"Product Code" + "    " + "Product Name" + "    " + "Product Description" + "    " + "Product Price"+ "Expiry Date" + "    " + "Active");
		
		for (Product product: productList) {
			System.out.println( "    " +product.getSerialNoOriginal() + "    " +product.getProductCode() + "    " + product.getProductName() + "    " + product.getProductDescription() + "    " + product.getProductPrice()
			+ "    "+ product.getExpiryDate() + "    " + product.isActive());
			
		}


	}


		
		
	public static void displayValidProducts(ArrayList<Product> productList, int serialNumber) {
		
		System.out.println("SL NO" + "    " +
				"Product Code" + "    " + "Product Name" + "    " + "Product Description" + "    " + "Product Price"+ "Expiry Date" + "    " + "Active");
		
		SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy");
		Date currentDate = new Date();
		
		for (Product product: productList) {
			if(product.getSerialNoOriginal() == serialNumber) {
				if(currentDate.after(product.getOpenDate()) && currentDate.before(product.getValidityDate())) {
					
					System.out.println( "Purchased");
//					System.out.println( "    " +product.getSerialNoOriginal() + "    " +product.getProductCode() + "    " + product.getProductName() + "    " + product.getProductDescription() + "    " + product.getProductPrice()
//					+ "    "+ product.getExpiryDate() + "    " + product.isActive());
				}else {
					System.out.println("Can't Purchase");
				}
				
				

			}
			
		
			
		}
		
			
//		try {
////			Date validityDate = new SimpleDateFormat("dd-MM-yyyy").parse(product.getValidityDate());
////			Date openDate = new SimpleDateFormat("dd-MM-yyyy").parse(product.getOpenDate());
////			
//			SimpleDateFormat formatter = new SimpleDateFormat("dd-MM-yyyy");
//			Date currentDate = new Date();
//			
//			if((validityDate.compareTo(currentDate)<0) && (openDate.compareTo(currentDate)>0) )  {
//				
//			
//				System.out.println( "    " +product.getSerialNoOriginal() + "    " +product.getProductCode() + "    " + product.getProductName() + "    " + product.getProductDescription() + "    " + product.getProductPrice()
//				+ "    "+ product.getExpiryDate() + "    " + product.isActive());
//
//			}
//			
//			
//		} catch (ParseException e) {
//			
//			e.printStackTrace();
//		}

	}


}





